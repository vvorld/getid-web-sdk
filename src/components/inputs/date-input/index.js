import React from 'react';
import { MuiPickersUtilsProvider, KeyboardDatePicker } from '@material-ui/pickers';
import DateFnsUtils from '@date-io/date-fns';
import Grid from '@material-ui/core/Grid';
import FormControl from '@material-ui/core/FormControl';
import PropTypes from 'prop-types';
import { Icon } from '@material-ui/core';
import datePickerStyles from './style';

const CalendarIcon = () => (
    <svg width="19" height="21" viewBox="0 0 19 21" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path fillRule="evenodd" clipRule="evenodd" d="M16.4792 2.46094H17.026C17.9307 2.46094 18.6667 3.28892 18.6667 4.30664L18.6667 19.1543C18.6667 20.172 17.9307 21 17.026 21L1.64063 21C0.735984 21 0 20.172 0 19.1543L0 4.30664C0 3.28892 0.735984 2.46094 1.64063 2.46094L2.1875 2.46094V1.8457C2.1875 0.827982 2.92348 0 3.82813 0C4.73277 0 5.46875 0.827982 5.46875 1.8457V2.46094L13.1979 2.46094V1.8457C13.1979 0.827982 13.9339 0 14.8385 0C15.7432 0 16.4792 0.827982 16.4792 1.8457V2.46094ZM14.8385 1.16209C14.537 1.16209 14.2917 1.42275 14.2917 1.74314V4.06736C14.2917 4.38775 14.537 4.64842 14.8385 4.64842C15.1401 4.64842 15.3854 4.38775 15.3854 4.06736V1.74314C15.3854 1.42275 15.1401 1.16209 14.8385 1.16209ZM3.28125 1.74314C3.28125 1.42275 3.52658 1.16209 3.82812 1.16209C4.12967 1.16209 4.375 1.42275 4.375 1.74314L4.375 4.06736C4.375 4.38775 4.12967 4.64842 3.82813 4.64842C3.52658 4.64842 3.28125 4.38775 3.28125 4.06736L3.28125 1.74314ZM1.09374 7.05013L17.5729 7.05013V4.06738C17.5729 3.74699 17.3276 3.48633 17.026 3.48633H16.4792V4.06738C16.4792 5.02856 15.7432 5.81055 14.8385 5.81055C13.9339 5.81055 13.1979 5.02856 13.1979 4.06738V3.48633L5.46874 3.48633L5.46874 4.06738C5.46874 5.02856 4.73275 5.81055 3.82811 5.81055C2.92347 5.81055 2.18749 5.02856 2.18749 4.06738V3.48633L1.64061 3.48633C1.33907 3.48633 1.09374 3.74699 1.09374 4.06738L1.09374 7.05013ZM5.44446 10.5H3.8889C3.67413 10.5 3.50001 10.6741 3.50001 10.8889V12.4444C3.50001 12.6592 3.67413 12.8333 3.8889 12.8333H5.44446C5.65923 12.8333 5.83334 12.6592 5.83334 12.4444V10.8889C5.83334 10.6741 5.65923 10.5 5.44446 10.5ZM3.8889 15.1667H5.44446C5.65923 15.1667 5.83334 15.3408 5.83334 15.5556V17.1112C5.83334 17.3259 5.65923 17.5 5.44446 17.5H3.8889C3.67413 17.5 3.50001 17.3259 3.50001 17.1112L3.50001 15.5556C3.50001 15.3408 3.67413 15.1667 3.8889 15.1667ZM10.1111 15.1667H8.55555C8.34078 15.1667 8.16666 15.3408 8.16666 15.5556V17.1112C8.16666 17.3259 8.34078 17.5 8.55555 17.5H10.1111C10.3259 17.5 10.5 17.3259 10.5 17.1112V15.5556C10.5 15.3408 10.3259 15.1667 10.1111 15.1667ZM8.55555 10.5H10.1111C10.3259 10.5 10.5 10.6741 10.5 10.8889V12.4444C10.5 12.6592 10.3259 12.8333 10.1111 12.8333H8.55555C8.34078 12.8333 8.16666 12.6592 8.16666 12.4444V10.8889C8.16666 10.6741 8.34078 10.5 8.55555 10.5ZM14.7778 10.5H13.2222C13.0075 10.5 12.8333 10.6741 12.8333 10.8889V12.4444C12.8333 12.6592 13.0075 12.8333 13.2222 12.8333H14.7778C14.9926 12.8333 15.1667 12.6592 15.1667 12.4444V10.8889C15.1667 10.6741 14.9926 10.5 14.7778 10.5ZM13.2222 15.1667H14.7778C14.9926 15.1667 15.1667 15.3408 15.1667 15.5556V17.1112C15.1667 17.3259 14.9926 17.5 14.7778 17.5L13.2222 17.5C13.0075 17.5 12.8333 17.3259 12.8333 17.1112V15.5556C12.8333 15.3408 13.0075 15.1667 13.2222 15.1667Z" fill="#105EF6"/>
    </svg>
);

function DateInput(props) {
  const classes = datePickerStyles();
  const classname = props.value ? ' filled' : '';

  return (
    <MuiPickersUtilsProvider utils={DateFnsUtils}>
      <Grid container justify="space-around">
        <FormControl fullWidth>
          <KeyboardDatePicker
            data-role="datePicker"
            openTo="date"
            autoOk
            inputVariant="outlined"
            variant="inline"
            disableFuture
            keyboardIcon={(
              <Icon className={classes.icon}>
                <CalendarIcon />
              </Icon>
            )}
            views={['year', 'month', 'date']}
            {...props}
            InputLabelProps={{
              classes: { root: classes.labelRoot },
            }}
            inputProps={{
              autocomplete: 'off',
              classes: { root: classes.root + classname },
            }}
          />
        </FormControl>
      </Grid>
    </MuiPickersUtilsProvider>
  );
}

DateInput.propTypes = {
  value: PropTypes.any,
};

DateInput.defaultProps = {
  value: '',
};

export default DateInput;
